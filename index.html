<!DOCTYPE html>
<html>
<head>
  <title>Studio Week 4</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <style>
    #map{ height: 100% }
  </style>
</head>
<body>
  <h1>Studio 4: Mapping Rats in Boston</h1>
  <br>
  <ul>
    <li><a class="active" href="index.html" target="_self">Output 1</a></li> 
  </ul>
<br>
  <div id="map"></div>

  <script>

  // initialize the map
  var map = L.map('map').setView([42.35, -71.08], 13);

  // load a tile layer
  L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
  {
    attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
    maxZoom: 17,
    minZoom: 9
  }).addTo(map);

  map.setZoom(12);
  $.getJSON("rodents.geojson",function(data){
   var locations = data.features.map(function(rat) {
     // the heatmap plugin wants an array of each location
     var location = rat.geometry.coordinates.reverse();
     location.push(0.5);
     return location; // e.g. [50.5, 30.5, 0.2], // lat, lng, intensity
   });

   var heat = L.heatLayer(locations, {
    radius: 35,
    gradient: {0.25: '#593d9c', 0.5: '#b8627d', 0.85: '#efe350'}
   });
   map.addLayer(heat);
   });

    // Add Scale Bar to Map
    L.control.scale({position: 'bottomleft'}).addTo(map);
  // Create Leaflet Control Object for Legend
    var legend = L.control({position: 'topright'});

    // Function that runs when legend is added to map
    legend.onAdd = function (map) {
    // Create Div Element and Populate it with HTML
    var div = L.DomUtil.create('div', 'legend');
    div.innerHTML += '<b>Boston Rat Heat Map</b><br />';
    div.innerHTML += '<i style="background: #efe350"></i><p>> 0.85</p>';
    div.innerHTML += '<i style="background: #b8627d"></i><p>> 0.50</p>';
    div.innerHTML += '<i style="background: #593d9c"></i><p>> 0.25</p>';
    // Return the Legend div containing the HTML content
    return div;
    };
    // Add Legend to Map
    legend.addTo(map);

  </script>
</body>
</html>