<!DOCTYPE html>
<html>

<head>
  <title>Studio Week 4</title>
  <!--Leaflet style sheet and Library --->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <!-- stylesheet for social media icons --->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- stylesheet for fonts --->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
  <style>
  /* Row 1 Maps */
      #map { /* Main Final Map Center Top */
        position: absolute;
        top: 200px;
        bottom: 0;
        width: 100%;
        }
  </style>
  <!-- Adding styling info for page layout by reading in a CSS file -->
  <link rel="stylesheet" href="styles.css">

</head>

<body>
  </div>

  <h1>Studio Week 4 <br> Boston Rat Map </h1>
  <!-- Add multiple pages to web page-->
  <!-- active class displays the grey box around current page-->
  <ul>
  	<li><a class="active" href="index.html" target="_self">Output 1</a></li>
    <li><a href="sheet_mapper.html" target="_self">Output 2</a></li>
  </ul>
  <br>

  <!-- div map container -->
  <div id="map"></div>
  <script>
  // initialize the map
  var map = L.map('map').setView([42.35, -71.08], 13);
  // load a tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
   }).addTo(map);

       // Load GeoJSON from an external file
   $.getJSON("neighborhoods.geojson",function(hoodData){
    L.geoJson( hoodData  , {
        style: function(feature){
        var fillColor,
            density = feature.properties.density;
        if ( density > 80 ) fillColor = "#006837";
        else if ( density > 40 ) fillColor = "#31a354";
        else if ( density > 20 ) fillColor = "#78c679";
        else if ( density > 10 ) fillColor = "#c2e699";
        else if ( density > 0 ) fillColor = "#ffffcc";
        else fillColor = "#f7f7f7";  // no data
        return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
        },
        onEachFeature: function( feature, layer ){
        layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " rats per square mile" )
        }
    }  ).addTo(map);
    });
    // Load GeoJSON from an external file
    $.getJSON("data/rodents.geojson",function(data){
        var ratIcon = L.icon({
            iconUrl: 'rat.png',
            iconSize: [50,40]
        });
        // add GeoJSON layer to the map once the file is loaded
        var rodents =  L.geoJson(data  ,{
             pointToLayer: function(feature,latlng){
            return L.marker(latlng,{icon: ratIcon});
            }
        }  ).addTo(map);
        });
        var clusters = L.markerClusterGroup();
        clusters.addLayer(rodents);
        map.addLayer(clusters); 

  </script>
</body>
</html>